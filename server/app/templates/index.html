<!-- Public Landing Page -->
{% extends "base.html" %} {% block extra_css %} {% endblock %} {% block title %}Port Scanner Delta
Reporter - Murdoch University{% endblock %} {% block content %}

<!-- Background & Formatting -->
<div class="container-fluid py-5">
  <div class="row align-items-center g-4">
    <!-- LEFT SIDE - Image -->
    <div class="col-lg-3 text-center">
      <img
        src="{{ url_for('static', filename='images/delta.png') }}"
        alt="Delta icon"
        class="img-fluid rounded"
        style="max-width: 300px; animation: float-gentle 4s ease-in-out infinite"
        onerror="this.style.display='none';" />
    </div>

    <!-- CENTRE - Title & Description -->
    <div class="col-lg-5">
      <h1 class="display-4 fw-bold mb-3">Port Scanner & Delta Reporter</h1>
      <p class="lead mb-4">A Network Security Monitoring Tool for Murdoch University</p>

      <!-- Status Badge -->
      <div class="d-flex align-items-center gap-2">
        <i
          class="bi bi-circle-fill text-success"
          style="font-size: 12px; animation: statusPulse 1.6s ease-in-out infinite"></i>
        <span class="text-muted">
          System Status: <strong class="text-success">Online</strong>
        </span>
      </div>
    </div>

    <!-- CENTRE - Title & Description -->
    <div class="col-lg-5">
      <h1 class="hero-title">Port Scanner & Delta Reporter</h1>
      <p class="slogan text-primary fw-bold mb-2" style="font-size: 1.3rem; letter-spacing: 1px">
        Scan. Detect. Report. Protect.
      </p>
      <p class="hero-subtitle" style="font-size: 1.1rem">
        A Network Security Monitoring Tool for Murdoch University
      </p>
      <div class="status-badge my-2">
        <span class="status-indicator status-online animated"></span>
        <span class="text-muted">System Status: <strong class="text-success">Online</strong></span>
      </div>
    </div>

    <!-- Authenticated User - Welcome Panel -->
    <div class="card shadow rounded-3">
      <div class="card-body text-center p-4">
        <i class="bi bi-person-check-fill" style="font-size: 3rem; color: var(--primary)"></i>
        <h5 class="mt-3">Welcome back, <strong>{{ current_user.username }}</strong></h5>
        <a
          href="{{ url_for('dashboard.index') }}"
          class="btn w-100 mt-3"
          style="background-color: var(--primary); border-color: var(--primary); color: white">
          <i class="bi bi-speedometer2"></i> Go to Dashboard
        </a>
      </div>
    </div>

    {% else %}

    <!-- Unauthenticated User - Login Card -->
    <div class="card shadow rounded-3">
      <div class="card-body p-4">
        <h3 class="text-center mb-4">Sign In</h3>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for
        category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %} {% endif %} {% endwith %}

        <!-- Login Form -->
        {% if form is defined %}
        <form method="POST" action="{{ url_for('auth.login') }}">
          {{ form.hidden_tag() }}

          <!-- Username Field -->
          <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <div class="input-group">
              <span class="input-group-text">
                <i class="bi bi-person"></i>
              </span>
              {{ form.username(class="form-control" + (" is-invalid" if form.username.errors else
              ""), placeholder="Enter your username") }}
            </div>
            {% if form.username.errors %}
            <div class="invalid-feedback d-block">
              {% for error in form.username.errors %}{{ error }}{% endfor %}
            </div>
            {% endif %}
          </div>

          <!-- Password Field -->
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
              <span class="input-group-text">
                <i class="bi bi-lock"></i>
              </span>
              {{ form.password(class="form-control" + (" is-invalid" if form.password.errors else
              ""), placeholder="••••••••") }}
            </div>
            {% if form.password.errors %}
            <div class="invalid-feedback d-block">
              {% for error in form.password.errors %}{{ error }}{% endfor %}
            </div>
            {% endif %}
          </div>

          <!-- Remember Me Checkbox -->
          <div class="mb-3 form-check">
            {{ form.remember(class="form-check-input", id="remember") }}
            <label class="form-check-label" for="remember"> Remember me </label>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn btn-primary w-100">
            <i class="bi bi-box-arrow-in-right"></i> Sign In
          </button>
        </form>

        {% else %}
        <!-- Fallback if form object not provided -->
        <form method="POST" action="{{ url_for('auth.login') }}">
          <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-person"></i></span>
              <input
                type="text"
                name="username"
                id="username"
                class="form-control"
                placeholder="Enter your username"
                required />
            </div>
          </div>

          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-lock"></i></span>
              <input
                type="password"
                name="password"
                id="password"
                class="form-control"
                placeholder="••••••••"
                required />
            </div>
          </div>

          <div class="mb-3 form-check">
            <input type="checkbox" name="remember" id="remember" class="form-check-input" />
            <label class="form-check-label" for="remember">Remember me</label>
          </div>

          <button type="submit" class="btn btn-primary w-100">
            <i class="bi bi-box-arrow-in-right"></i> Sign In
          </button>
        </form>
        {% endif %}

        <!-- Footer -->
        <div class="text-center mt-3">
          <small class="text-muted"> Need access? Contact your system administrator. </small>
        </div>
      </div>
    </div>

    <!-- Key Features Section (compact three-column layout) -->
    <div class="container mt-3">
      <div class="row text-center mb-2">
        <h3 class="fw-bold mb-1" style="font-size: 1.6rem">Key Features</h3>
        <p class="text-muted mb-2" style="font-size: 1.1rem">
          Why choose Port Scanner & Delta Reporter?
        </p>
      </div>
      <div class="row g-2 justify-content-center">
        <div class="col-md-4">
          <div class="card h-100 shadow-sm p-2" style="min-height: 170px">
            <div class="card-body py-2 px-2 text-center">
              <i class="bi bi-lightning-charge text-primary" style="font-size: 1.3rem"></i>
              <h6 class="card-title mt-2 mb-1" style="font-size: 1.15rem">Fast Scanning</h6>
              <p class="card-text mb-1" style="font-size: 1.05rem">
                Quickly scan networks and ports with optimized performance and reliability.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100 shadow-sm p-2">
            <div class="card-body py-2 px-2 text-center">
              <i class="bi bi-bar-chart-line text-success" style="font-size: 1.3rem"></i>
              <h6 class="card-title mt-2 mb-1" style="font-size: 1.15rem">Delta Reporting</h6>
              <p class="card-text mb-1" style="font-size: 1.05rem">
                Track changes and differences in scan results for actionable insights and alerts.
              </p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100 shadow-sm p-2">
            <div class="card-body py-2 px-2 text-center">
              <i class="bi bi-shield-lock text-warning" style="font-size: 1.3rem"></i>
              <h6 class="card-title mt-2 mb-1" style="font-size: 1.15rem">Secure Architecture</h6>
              <p class="card-text mb-1" style="font-size: 1.05rem">
                Built with security best practices to protect your data and infrastructure.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- system status moved into hero center column -->

    {% endblock %}
  </div>
</div>
