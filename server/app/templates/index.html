{% extends "base.html" %} {% block extra_css %}
<style>
  @keyframes float-gentle {
    0%,
    100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-15px);
    }
  }

  @keyframes statusPulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.4;
    }
  }

  .help-fab {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--bs-primary);
    color: white;
    border: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    z-index: 1000;
  }

  .help-fab:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
  }
</style>
{% endblock %} {% block title %}Port Scanner Delta Reporter - Murdoch University{% endblock %} {%
block content %}
<!-- Hero / Landing Section -->
<section class="py-5">
  <div class="container">
    <div class="row align-items-center g-4">
      <!-- LEFT: Image -->
      <div class="col-12 col-lg-3 text-center">
        <img
          src="{{ url_for('static', filename='images/delta.png') }}"
          alt="Delta icon"
          class="img-fluid rounded"
          style="max-width: 250px; animation: float-gentle 4s ease-in-out infinite"
          onerror="this.style.display='none';" />
      </div>

      <!-- CENTER: Title & Description -->
      <div class="col-12 col-lg-5">
        <h1 class="display-4 fw-bold mb-3">Port Scanner &amp; Delta Reporter</h1>
        <p class="text-primary fw-bold mb-2 fs-5" style="letter-spacing: 1px">
          Scan. Detect. Report. Protect.
        </p>
        <p class="fs-5 text-body-secondary mb-4">
          A Network Security Monitoring Tool for Murdoch University
        </p>

        <!-- System Status Badge -->
        <div class="d-flex align-items-center gap-2">
          <i
            class="bi bi-circle-fill text-success"
            style="font-size: 12px; animation: statusPulse 1.6s ease-in-out infinite"></i>
          <span class="text-body-secondary">
            System Status: <strong class="text-success">Online</strong>
          </span>
        </div>
      </div>

      <!-- RIGHT: Login / Welcome Panel -->
      <div class="col-12 col-lg-4">
        {% if current_user.is_authenticated %}
        <!-- Welcome Card -->
        <div class="card shadow-sm text-center p-4">
          <i class="bi bi-person-check-fill display-5 text-primary mb-3"></i>
          <h5 class="mb-2">Welcome back, <strong>{{ current_user.username }}</strong></h5>
          <a href="{{ url_for('dashboard.index') }}" class="btn btn-primary w-100 mt-3">
            Go to Dashboard
          </a>
        </div>
        {% else %}
        <!-- Login Card -->
        <div class="card shadow-sm p-4">
          <h4 class="text-center mb-4">Sign In</h4>

          <!-- Flash Messages (duplicated for login card) -->
          {% with messages = get_flashed_messages(with_categories=true) %} {% if messages %} {% for
          category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"></button>
          </div>
          {% endfor %} {% endif %} {% endwith %}

          <!-- Microsoft SSO Button -->
          <div class="mb-3">
            <a
              href="{{ url_for('auth.oauth_login', provider='azure') }}"
              class="btn btn-lg w-100 btn-outline-secondary d-flex align-items-center justify-content-center gap-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 21 21"
                aria-hidden="true">
                <rect x="1" y="1" width="9" height="9" fill="#f25022" />
                <rect x="11" y="1" width="9" height="9" fill="#7fba00" />
                <rect x="1" y="11" width="9" height="9" fill="#00a4ef" />
                <rect x="11" y="11" width="9" height="9" fill="#ffb900" />
              </svg>
              <span>Sign in with Microsoft</span>
            </a>
          </div>

          <!-- Divider -->
          <div class="position-relative my-3">
            <hr />
            <span
              class="position-absolute top-50 start-50 translate-middle bg-body px-3 text-body-secondary small">
              Or sign in with username
            </span>
          </div>

          <!-- Login Form -->
          {% if form is defined %}
          <form method="POST" action="{{ url_for('auth.login') }}">
            {{ form.hidden_tag() }}

            <div class="mb-3">
              <label for="username" class="form-label">Username</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-person"></i></span>
                {{ form.username(class="form-control" + (" is-invalid" if form.username.errors else
                ""), placeholder="Enter your username") }}
              </div>
              {% if form.username.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.username.errors %}{{ error }}{% endfor %}
              </div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-lock"></i></span>
                {{ form.password(class="form-control" + (" is-invalid" if form.password.errors else
                ""), placeholder="••••••••") }}
              </div>
              {% if form.password.errors %}
              <div class="invalid-feedback d-block">
                {% for error in form.password.errors %}{{ error }}{% endfor %}
              </div>
              {% endif %}
            </div>

            <div class="mb-3 form-check">
              {{ form.remember(class="form-check-input", id="remember") }}
              <label class="form-check-label" for="remember">Remember me</label>
            </div>

            <button type="submit" class="btn btn-primary w-100">
              <i class="bi bi-box-arrow-in-right me-2"></i>Sign In
            </button>
          </form>
          {% else %}
          <!-- Fallback Form -->
          <form method="POST" action="{{ url_for('auth.login') }}">
            <div class="mb-3">
              <label for="username" class="form-label">Username</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-person"></i></span>
                <input
                  type="text"
                  name="username"
                  id="username"
                  class="form-control"
                  placeholder="Enter your username"
                  required />
              </div>
            </div>

            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-lock"></i></span>
                <input
                  type="password"
                  name="password"
                  id="password"
                  class="form-control"
                  placeholder="••••••••"
                  required />
              </div>
            </div>

            <div class="mb-3 form-check">
              <input type="checkbox" name="remember" id="remember" class="form-check-input" />
              <label class="form-check-label" for="remember">Remember me</label>
            </div>

            <button type="submit" class="btn btn-primary w-100">
              <i class="bi bi-box-arrow-in-right me-2"></i>Sign In
            </button>
          </form>
          {% endif %}

          <!-- Register Link -->
          <div class="text-center mt-4">
            <p class="text-body-secondary mb-2">Don't have an account?</p>
            <a href="{{ url_for('auth.register') }}" class="btn btn-outline-secondary">
              <i class="bi bi-person-plus me-2"></i>Create Account
            </a>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- Key Features Section -->
<section class="py-5 border-top">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="fw-bold mb-3">Key Features</h2>
      <p class="text-body-secondary">Why choose Port Scanner &amp; Delta Reporter?</p>
    </div>

    <div class="row g-4">
      <div class="col-12 col-md-4">
        <div class="card shadow-sm h-100 text-center p-4">
          <div class="card-body">
            <i class="bi bi-lightning-charge text-primary display-4 mb-3"></i>
            <h5 class="card-title">Fast Scanning</h5>
            <p class="card-text text-body-secondary">
              Quickly scan networks and ports with optimized performance and reliability.
            </p>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="card shadow-sm h-100 text-center p-4">
          <div class="card-body">
            <i class="bi bi-bar-chart-line text-success display-4 mb-3"></i>
            <h5 class="card-title">Delta Reporting</h5>
            <p class="card-text text-body-secondary">
              Track changes and differences in scan results for actionable insights and alerts.
            </p>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-4">
        <div class="card shadow-sm h-100 text-center p-4">
          <div class="card-body">
            <i class="bi bi-shield-lock text-warning display-4 mb-3"></i>
            <h5 class="card-title">Secure Architecture</h5>
            <p class="card-text text-body-secondary">
              Built with security best practices to protect your data and infrastructure.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %} {% block extra_js %} {{ super() }}

<!-- Floating Help Button -->
<button
  id="help-fab"
  class="help-fab"
  type="button"
  data-bs-toggle="modal"
  data-bs-target="#helpModal"
  aria-label="Help and User Manual">
  <i class="bi bi-question-circle-fill"></i>
</button>

<!-- Help Modal -->
<div
  class="modal fade"
  id="helpModal"
  tabindex="-1"
  aria-labelledby="helpModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="helpModalLabel">
          <i class="bi bi-question-circle me-2"></i>Help &amp; User Manual
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="mb-3">Quick resources to get you started:</p>
        <div class="list-group list-group-flush">
          <a
            href="https://github.com/TeamFixIT/portscan-delta-reporter/tree/main/docs"
            target="_blank"
            rel="noopener"
            class="list-group-item list-group-item-action d-flex align-items-center gap-2">
            <i class="bi bi-book text-primary"></i>
            <span>Project Documentation</span>
          </a>
          <a
            href="https://github.com/TeamFixIT/portscan-delta-reporter/blob/main/docs/client-agent.md"
            target="_blank"
            rel="noopener"
            class="list-group-item list-group-item-action d-flex align-items-center gap-2">
            <i class="bi bi-person-video3 text-primary"></i>
            <span>Client Agent Guide</span>
          </a>
          <a
            href="https://github.com/TeamFixIT/portscan-delta-reporter#readme"
            target="_blank"
            rel="noopener"
            class="list-group-item list-group-item-action d-flex align-items-center gap-2">
            <i class="bi bi-info-circle text-primary"></i>
            <span>Repository README</span>
          </a>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
{% endblock %}
